# SolBeePop\_ecotox Repository

Last Edited: 16 April 2024

## Disclaimer

The software and associated files uploaded in this repository were used to generate the results published in:

Version "SolBeePop": Schmolke, A., Galic, N., & Hinarejos, S. (2023). SolBeePop: A model of solitary bee populations in agricultural landscapes. Journal of Applied Ecology, 60, 2573–2585. [https://doi.org/10.1111/1365-2664.14541](https://doi.org/10.1111/1365-2664.14541) 

Version "SolBeePop_ecotox": Schmolke, A., Galic, N., Vanessa Roeben, Thomas G. Preuss, Mark Miles, & Hinarejos, S. SolBeePopecotox: A population model for pesticide risk assessments of solitary bees. Submitted.

_This software and associated files are provided "as is" with the sole purpose to allow the reproduction of the published results without any warranties of performance or fitness for any other purpose._

## SolBeePop\_ecotox Code and Documentation

SolBeePop_ecotox.nlogo: Code of the SolBeePop\_ecotox model. 
_To run SolBeePop\_ecotox, the NetLogo software is required_ (for runs in this study, NetLogo 6.3.0 was used). The link to download NetLogo 6.3.0 is here: [https://ccl.northwestern.edu/netlogo/6.3.0/](https://ccl.northwestern.edu/netlogo/6.3.0/)

SolBeePop\_ecotox\_TRACE.pdf: Documentation of the SolBeePop model following TRACE. The documentation includes the conceptual model development following Pop-GUIDE, the model description according to the ODD protocol and the detailed description of the model analysis and corroboration. Additions for the ecotox version are presented in green font.

SolBeePop\_Tables.xlsx: Tables with descriptions of the procedures in SolBeePop\_ecotox, model parameters, input files and variables. Compilations of parameters for species Eucera pruinosa, Megachile rotundata, Nomia melanderi and Osmia bicornis are also included.

Foraging\_Landscape\_InputSce\_SolBeePop2022.R: R-script for the generation of SolBeePop input files without exposures (requires daily weather data as input) 

## SolBeePop Simulations 

__Model Analysis (version SolBeePop 2023):__

SolBeePop input files:

- Model\_Analysis\Floral\_generic\_optimal.csv
- Model\_Analysis\Floral\_generic\_Sce2.csv
- Model\_Analysis\Floral\_generic\_Sce3\_Osmia.csv
- Model\_Analysis\Floral\_generic\_Sce3\_Nomia.csv

Setup of simulations (definition of model parameters and ranges):

- Model\_Analysis\input\_\<Osmia or Nomia\>\_\<scenario number\>.csv

PRCC analysis of simulations:

- Model\_Analysis\prcc\_run\_\<Osmia or Nomia\>\_\<scenario number\>.csv

R-scripts:

- Model\_Analysis\run\_lhc.R – setup of Latin Hypercube for model analysis simulations
- Model\_Analysis\run\_netlogo.R – generates .xml (NetLogo BehaviorSpace) and .bat files to run simulations from batch (using CommandPrompt)
- Model\_Analysis\ua\_prcc\_analysis.R – read in simulation output files from one species and scenario, and calculates PRCCs; writes PRCC table to file; generates PRCC plots across model outputs
- Model\_Analysis\ua\_prcc\_plot\_Fig.R – generates PRCC plot (manuscript figure)

__Model Analysis Effects (version SolBeePop\_ecotox):__

Input files and R-scripts used for both sensitivity analysis (SA) and analysis of parameter uncertainty (UA)

SolBeePop\_ecotox input files:

- Model\_Analysis\_Effects\Floral\_generic\_control\_exposure\_Jan2023.csv
- Model\_Analysis\_Effects\Floral\_Exp1\_Osmia\_Jan2023.csv
- Model\_Analysis\_Effects\Floral\_Exp2\_Nomia\_Jan2023.csv

Setup of simulations (definition of model parameters and ranges):
R-scripts:

- Model\_Analysis\_Effects\set\_batch\_runs\_SolBeePop\_Mar2023.R - generates .xml (NetLogo BehaviorSpace) and .bat files to run simulations from batch (using CommandPrompt)
- Model\_Analysis\_Effects\sa\_effects\_outputs\_Mar2023.R - combines model outputs (from multiple files) and writes it to a single file
- Model\_Analysis\_Effects\sa\_effects\_prcc\_Mar2023.R - reads in output file generated by previous script and calculates PRCCs based on relative effects ; writes PRCC table to file
- Model\_Analysis\_Effects\SA\_PRCC\_combinedplot\_Mar2023.R - generates plot from PRCC table (figures in TRACE)

Sensitivity analysis (effects; version SolBeePop\_ecotox)

Osmia: files for SA conducted with _Osmia bicornis_
Nomia: files for SA conducted with _Nomia melanderi_

- Model\_Analysis\_Effects\Sensitivity\_analysis\_effects\\<Osmia or Nomia\>\input\_\<Osmia or Nomia\>\_SA\_\<control or GUTS\_IT or GUTS\_SD\>\_Mar2023.csv - parameter settings for simulations without exposures (control) or with exposure using GUTS-IT or GUTS-SD
- Model\_Analysis\_Effects\Sensitivity\_analysis\_effects\\<Osmia or Nomia\>\run\_\<Osmia or Nomia\>\_\<control or GUTS\_IT or GUTS\_SD\>\_Mar2023.csv - setup for batch runs (NetLogo headless BehaviorSpace)
- Model\_Analysis\_Effects\Sensitivity\_analysis\_effects\\<Osmia or Nomia\>\outputs\_run\_\<Osmia or Nomia\>\_\<control or GUTS\_IT or GUTS\_SD\>\_Mar2023.csv - combined outputs from simulations
- Model\_Analysis\_Effects\Sensitivity\_analysis\_effects\\<Osmia or Nomia\>\releffects\_run\_\<Osmia or Nomia\>\_\<GUTS\_IT or GUTS\_SD\>\_Mar2023.csv - calculated effect sizes relative to control from simulations
- Model\_Analysis\_Effects\Sensitivity\_analysis\_effects\\<Osmia or Nomia\>\prcc\_run\_\<Osmia or Nomia\>\_\<GUTS\_IT or GUTS\_SD\>\_Mar2023.csv - PRCC of relative effect sizes 

Uncertainty analysis (effects; version SolBeePop\_ecotox)

Osmia: files for UA conducted with _Osmia bicornis_
Nomia: files for UA conducted with _Nomia melanderi_

- Model\_Analysis\_Effects\Uncertainty\_analysis\_effects\\<Osmia or Nomia\>\run\_\<Osmia or Nomia\>\_\<control or Exp1\_GUTS\_IT or Exp1\_GUTS\_SD\>\_Mar2023.csv - setup for batch runs (NetLogo headless BehaviorSpace) (\"Exp2\" for Nomia)
- Model\_Analysis\_Effects\Uncertainty\_analysis\_effects\\<Osmia or Nomia\>\outputs\_run\_\<Osmia or Nomia\>\_\<control or Exp1\_GUTS\_IT or Exp1\_GUTS\_SD\>\_Mar2023.csv - combined outputs from simulations (\"Exp2\" for Nomia)
- Model\_Analysis\_Effects\Uncertainty\_analysis\_effects\\<Osmia or Nomia\>\prcc\_run\_\<Osmia or Nomia\>\_\<Exp1\_GUTS\_IT or Exp1\_GUTS\_SD\>\_Mar2023.csv - PRCC of relative effect sizes (\"Exp2\" for Nomia)

__Calibration and validation (version SolBeePop 2023):__

SolBeePop input files:

- Calibration\_Validation\Floral\_S15\_01802\_Sce3\_Jan2022.csv
- Calibration\_Validation\Floral\_S15\_01803\_Sce3\_Jan2022.csv
- Calibration\_Validation\Floral\_S15\_01804\_Sce3\_Jan2022.csv

Data from Ruddle et al. (2018) semi-field studies with Osmia bicornis (including weather data) are found the folders:

- Calibration\_Validation\S15-01802-01\_Tables
- Calibration\_Validation\S15-01803-01\_Tables
- Calibration\_Validation\S15-01804-01\_Tables

Calibration\_Validation\Calibration\: contains necessary input files to set up calibration simulations (by R-scripts listed below), goodness-of-fit measures (GOFM) calculated from outputs and simulation outputs prepared for plotting

Calibration\_Validation\Validation\: contains setup of validation simulations (by R-scripts listed below), goodness-of-fit measures (GOFM) calculated from outputs and simulation outputs prepared for plotting

R-scripts:

- Calibration\_Validation\run\_lhc\_calib.R – setup of Latin Hypercube for calibration simulations
- Calibration\_Validation\run\_netlogo\_calib\_valid.R – generates .xml (NetLogo BehaviorSpace) and .bat files to run simulations from batch (using CommandPrompt)
- Calibration\_Validation\Calibration\_Validation\_analysis.R – read in simulation output files and calculate goodness-of-fit measures (GOFM)
- Calibration\_Validation\Plot\_Calibration\_Validation\_Feb2023.R – plot simulation outputs from single parameter combinations along with study data (manuscript figure)

__Osmia semi-field study data (used for calibration and validation with effects)__

Data from semi-field studies conducted with _O. bicornis_ in 2019 and 2021 (data provided by Eurofins)

- Osmia\_semi\_field\_data\Weather\_data<...>.csv - contains weather data used for the generation of the SolBeePop\_ecotox input files
- Osmia\_semi\_field\_data\Study\_Treatments\_Eurofins\_Study\<1 or 2\>\_\<2019 or 2021\>.csv - study dates and cocoons introduced
- Osmia\_semi\_field\_data\NestOccup\_Eurofins\_Study\<1 or 2\>\_\<2019 or 2021\>.csv - post-emergent bees observed in nest boxes
- Osmia\_semi\_field\_data\CellProd\_Eurofins\_Study\<1 or 2\>\_\<2019 or 2021\>.csv - number of brood cells in nest boxes
- Osmia\_semi\_field\_data\Cocoons\_Eurofins\_Study\<1 or 2\>\_\<2019 or 2021\>.csv - total number of cocoons from nest boxes at the end of the tunnel phase
- Osmia\_semi\_field\_data\Emergence\_Eurofins\_Study\<1 or 2\>\_\<2019 or 2021\>.csv - number of adult bees emerging from cocoons after incubation

__Calibration and validation (effects; version SolBeePop\_ecotox):__

SolBeePop input files:

- Calibration\_Validation\_Effects\Floral\_Eurofins2019_26Apr2023\_control.csv - input file without exposure (control) for the simulation of the 2019 _O. bicornis_ semi-field study 
- Calibration\_Validation\_Effects\Floral\_Eurofins2019_25Oct2023\_DIMexp\_med\_resid\_\<0p or 25p or 50p or 75p>\_spray.csv - input files with dimethoate exposure for the 2019 study, different scenarios of bees exposed to direct spray (file name without number follows by \"p\" corresponds to the default assumption of 100\% exposed)
- Calibration\_Validation\_Effects\Floral\_Eurofins2021_27Apr2023\_control.csv - input file without exposure (control) for the simulation of the 2021 _O. bicornis_ semi-field study 
- Calibration\_Validation\_Effects\Floral\_Eurofins2021_25Oct2023\_DIMexp\_med\_resid\_\<0p or 25p or 50p or 75p>\_spray.csv - input files with dimethoate exposure for the 2021 study, different scenarios of bees exposed to direct spray (file name without number follows by \"p\" corresponds to the default assumption of 100\% exposed)

R-scripts:

- Calibration\_Validation\_Effects\set\_batch\_runs\_SolBeePop\_Mar2023.R – generates .xml (NetLogo BehaviorSpace) and .bat files to run simulations from batch (using CommandPrompt)
- Calibration\_Validation\_Effects\Weather\_foraging\_semifield\_Apr2023.R - generates model input file (time series) without exposures (exposure columns added manually)

Calibration\_Validation\_Effects\Pforzheim\: files from soil exposure modeling (pearl)

Calibration\_Validation\_Effects\Control\_Calib\_Valid\: setup of calibration, best matches in calibration outputs and R-scripts for plotting   

Calibration\_Validation\_Effects\Effect\_Simulations\: setup of effect simulations, simulation outputs and R-scripts for plotting

__Simulations across species (SolBeePop 2023):__

SolBeePop input file:

- Cross\_Species\_Simulations\Floral\_generic\_optimal.csv

Setup of simulations (definition of model parameters and ranges):

- Cross\_Species\_Simulations\run\_cross\_species.csv

Summary statistics of simulation outputs:

- Cross\_Species\_Simulations\csp\_stat\_30yr.csv

R-scripts:

- Cross\_Species\_Simulations\run\_netlogo\_cross\_species.R – generates .xml (NetLogo BehaviorSpace) and .bat files to run simulations from batch (using CommandPrompt)
- Cross\_Species\_Simulations\cross\_species\_stats.R – reads the simulation outputs and calculates population properties (carrying capacity, time to reach it, final population size, etc.)
- Cross\_Species\_Simulations\cross\_species\_plots.R – read the simulation outputs and generates plots, including the manuscript figures

__Hypothetical semi-field studies (effects; version SolBeePop\_ecotox):__

Hypothetical semi-field study simulations conducted with untested species. Additional simulations conducted with _O. bicornis_.

Nomia: contains files for weather and exposure input generation, model inputs files, simulation setup and outputs for _N. melanderi_ simulations 
Eucera: contains files for weather and exposure input generation, model inputs files, simulation setup and outputs for _E. pruinosa_ simulations 
Osmia: contains files for setup simulations in addition to the ones conducted for calibration to the 2021 Eurofins _O. bicornis_ semi-field study and simulation outputs 

R-scripts:

- Hypothetical\_Semi\_Field\DIM\_effects\_case\_absolute\_multiple\_Dec2023.R - plots from simulations with different scenarios of direct spray exposure of Nomia, Eucera and Osmia (manuscript figures)
- Hypothetical\_Semi\_Field\DIM\_effects\_case\_absolute\_tempsce\_Dec2023.R - plots from simulations with different temporal application scenarios of Nomia, Eucera and Osmia (manuscript figures)
- Hypothetical\_Semi\_Field\df\_avg\_function.R - function used by previous scripts
- Hypothetical\_Semi\_Field\DIM\_effects\_case\_relative\_Nov2023.R - plots of relative effect sizes from simulations with Nomia, Eucera and Osmia (TRACE figures)
